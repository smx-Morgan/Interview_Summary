**redis key的过期删除机制**

1）被动删除：key再被操作时，Redis主动检查key是否过期，过期则删除；

优劣：对CPU友好，只有CPU在被操作时删除，不浪费CPU时间；对内存不友好，如果同时大量key过期，这些key在被使用前不会被删除造成资源浪费；

2）主动删除：Redis会定期随机扫描一批设置了过期时间的key并进行删除处理；当已用内存超过最大内存maxmemory时也会触发主动清除策略；