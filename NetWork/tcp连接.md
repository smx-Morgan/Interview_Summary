**tcp和udp的区别**

TCP 是面向连接的传输。UDP 是无连接的传输

TCP 有流量控制、拥塞控制，检验数据数据按序到达，而 UDP 无。

TCP 是可靠性传输，他的可靠性是由超时重发机制实现的，而 UDP则是不可靠传输

UDP 因为少了很多控制信息，所以传输速度比 TCP 速度快

TCP 适合用于传输大量数据，UDP 适合用于传输小量数据

**UDP有长度控制吗**

UDP有发送长度限制，UDP的最大包长度是2^16-1（65535）个字节适合小文件

**什么时候用UDP**

**UDP 通常用于实时应用程序,比如视频会议、在线游戏、语音聊天等**,因为这些应用程序通常要求实时性比较高,而且数据包丢失对应用程序的影响也不是很大。

- **三次握手和四次挥手的过程**

  当客户端要向服务端发送数据时，需要先建立TCP连接，这个过程被称为“三次握手”。

  TCP连接的释放需要四次挥手来完成。

  三次握手的过程如下：

  1. 客户端向服务端发送SYN报文，表示客户端请求建立连接。
  2. 服务端接收到SYN报文后，向客户端发送SYN+ACK报文，表示服务端已经收到请求，并同意建立连接。
  3. 客户端接收到服务端的SYN+ACK报文后，向服务端发送ACK报文，表示客户端已经收到服务端的确认，连接建立完成。

  四次挥手的过程如下：

  1. 客户端发送FIN报文，表示客户端不再发送数据，请求断开连接。
  2. 服务端接收到FIN报文后，向客户端发送ACK报文，表示服务端已经接收到客户端的请求，并准备好断开连接。
  3. 服务端发送FIN报文，表示服务端不再发送数据，请求断开连接。
  4. 客户端接收到服务端的FIN报文后，向服务端发送ACK报文，表示客户端已经接收到服务端的请求，并断开连接。

  需要注意的是，在四次挥手完成后，TCP连接就被彻底关闭了，双方不能再进行数据传输。

### 扩展

**为什么第三次挥手要等待2MSL**

报文最长存活时间就是1MSL，服务端在第三次挥手后也会等待2MSL时间，为的就是怕第四次挥手的ACK确认报文丢失。
因为若不等待2MSL客户端就立即进入CLOSED，有可能ACK包丢失从而导致服务端一直处于LAST_ACK状态，此时即使服务端再怎么重发也没用了，因为客户端已经进入CLOSED状态了。

**什么是全连接队列什么是半连接队列**

服务端收到客户端发起的 SYN 请求后，内核会把该连接存储到半连接队列，并向客户端响应 SYN+ACK，接着客户端会返回 ACK，服务端收到第三次握手的 ACK 后，内核会把连接从半连接队列移除，然后创建新的完全的连接，并将其添加到 accept 队列，等待进程调用 accept 函数时把连接取出来。

**什么是泛洪攻击**

SYN攻击属于DOS攻击的一种,它利用TCP协议缺陷,通过发送大量的半连接请求,耗费服务器CPU和内存资源.服务器最早接受到SYN包时,在TCP协议栈中会将相应的半 连接记录添加到队列中,之后等待接受下面准备握手的数据包,如果握手成功,那么这个半连接记录将从队列中删除.或者当服务器未收到客户端的确认包时,会重 发请求包,一直到超时才将此条目从未连接队列删除.

**网络拥塞状态下TCP数据传输，从流量控制角度聊聊**

[TCP拥塞控制的目的是让每个发送方确定网络中有多少可用容量，以便它知道可以安全传输多少数据包]。TCP拥塞控制的核心是维护一个**拥塞窗口（cwnd）**，它表示当前网络中允许存在的未确认的数据包的数量]

**TCP 利用滑动窗口实现流量控制的机制？**

TCP 中采用滑动窗口来进行传输控制，滑动窗口的大小意味着**接收方还有多大的缓冲区可以用于接收数据**。发送方可以通过滑动窗口的大小来确定应该发送多少字节的数据。

当滑动窗口为 0 时，发送方一般不能再发送数据报，但有两种情况除外，一种情况是可以发送紧急数据。

**TCP 拥塞控制原理**

TCP拥塞控制是指在网络拥塞的情况下，TCP协议通过调整发送数据的速率来避免网络拥塞的一种机制。TCP拥塞控制的主要目的是保证网络的稳定性和公平性，避免网络拥塞导致数据丢失和延迟增加等问题。

TCP拥塞控制的主要机制包括以下几个方面：

慢启动：在TCP连接建立时，发送方会先发送一小段数据，然后逐渐增加发送数据的速率，直到网络出现拥塞为止。

拥塞避免：在慢启动阶段结束后，发送方会进入拥塞避免阶段，此时发送方会以一定的速率发送数据，以避免网络拥塞。

快速重传：当发送方收到接收方的重复确认时，说明网络出现了拥塞，此时发送方会立即重传丢失的数据包，以避免网络拥塞。

快速恢复：当发送方收到接收方的重复确认时，说明网络出现了拥塞，此时发送方会将拥塞窗口减半，并进入快速恢复状态，以避免网络拥塞。

TCP拥塞控制的实现需要依赖于网络的反馈信息，例如接收方的确认信息和网络的延迟信息等。通过不断地调整发送数据的速率，TCP协议可以在网络拥塞的情况下保证数据的可靠传输，从而提高网络的稳定性和公平性。